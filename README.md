# 터틀 트레이딩 자동화 시스템

## 📈 터틀 트레이딩 핵심 원칙

### 1. 진입 신호 (Entry Signal)
- **20일 신고가 돌파**: 20일 최고가를 상향 돌파 시 즉시 진입
- **55일 신고가 돌파**: 보조 신호로 활용 (더 강한 추세 확인)

### 2. 포지션 사이징 (Position Sizing)

#### ATR 기반 리스크 관리
- **N값**: 20일 ATR (Average True Range) = 일일 변동성 측정
- **1유닛 정의**: 1N 움직임 시 계좌의 1% 손실이 되는 포지션 크기
- **계산 공식**: 1유닛 = (계좌자금 × 1%) ÷ N(ATR)

#### 초기 진입
- **포지션 크기**: 1유닛 (실제 리스크 2%)
- **스톱로스**: 진입가 - 2N 거리
- **진입 방법**: 돌파 즉시 시장가 매수

#### 피라미딩 (Pyramid Adding)
- **추가 조건**: 가격이 0.5N씩 상승할 때마다 1유닛 추가
- **최대 한도**: 총 4유닛 (최대 리스크 8%)
- **추가 순서**:
  - 1유닛: 초기 진입
  - 2유닛: +0.5N 상승 시
  - 3유닛: +1.0N 상승 시
  - 4유닛: +1.5N 상승 시

#### 실제 계산 예시 (계좌: 2,500만원)
```
비트코인 예시:
- 현재가: 95,000,000원
- ATR(N): 4,500,000원
- 1유닛: (2,500만원 × 1%) ÷ 450만원 = 0.056 BTC
- 투입금액: 0.056 BTC × 9,500만원 = 528만원
- 스톱로스: 9,500만원 - 900만원 = 8,600만원
```

### 3. 청산 전략 (Exit Strategy)

#### 손절 (Stop Loss)
- **기준**: 진입가 - 2N 또는 10일 최저가 중 가까운 곳
- **실행**: 무조건 전량 매도 (예외 없음)

#### 추세 전환 청산
- **기준**: 10일 최저가 돌파 시 전량 매도
- **목적**: 추세 반전 시 빠른 청산

### 4. 리스크 관리 원칙

#### 포트폴리오 리스크
- **종목당 최대**: 4유닛 (8% 리스크)
- **총 포지션**: 모든 종목 합계 최대 12유닛 (24% 리스크)
- **시장별 분산**: 상관관계 낮은 시장에 분산 투자

#### 변동성 기반 조정
- **고변동성 시장**: 작은 포지션 (ATR 높음)
- **저변동성 시장**: 큰 포지션 (ATR 낮음)
- **목적**: 모든 포지션의 리스크 균등화

### 5. 터틀의 5가지 핵심 질문

매매 전 반드시 확인해야 할 사항:

1. **시장 상태는 어떠한가?**
   - 현재 주가 수준 파악

2. **시장 변동성은 얼마인가?**
   - 일일 변동폭(N) 계산

3. **투자하는 자금은 얼마인가?**
   - 포지션 사이징 기준

4. **매매 규칙과 투자 방향은 무엇인가?**
   - 명확한 진입/청산 규칙 설정

5. **위험회피 성향은 어떠한가?**
   - 리스크 관리 수준 결정

### 6. 터틀의 핵심 원칙

- **원금 변동에 동요하지 말 것**: 일관된 매매 유지
- **과정이 아닌 결과로 판단**: 단기 변동에 흔들리지 않기
- **규칙을 철저히 준수**: 감정 배제, 시스템 신뢰
- **현재에 집중**: 과거 손익에 연연하지 않기
- **손실은 작게, 이익은 크게**: 손절은 빠르게, 수익은 길게

### 7. 리처드 데니스의 핵심 교훈

> "가격이 실제고, 지능이 현상이다"
>
> "이익보다 손실 관리가 중요하다"
>
> "단순하고 견고한 시스템이 최고다"

### 8. 추세 추종의 철학

- 시장을 예측하려 하지 않는다
- 비가 올 확률을 예측하는 대신 우산을 준비한다
- 작은 손실은 큰 추세를 잡기 위한 비용
- 수익의 대부분은 소수의 큰 추세에서 발생

## 🚀 프로젝트 설정

### 환경 설정

1. `.env.example`을 `.env`로 복사
2. 빗썸 API 키 설정
3. 트레이딩 파라미터 조정

### 설치 및 실행

```bash
# 패키지 설치 (uv 사용)
uv sync

# 실행
uv run python main.py
```

### 주요 설정 파라미터

- `ACCOUNT_CAPITAL`: 빗썸 계좌 자본금 (전체 자산의 1/4)
- `ATR_PERIOD`: ATR 계산 기간 (20일)
- `UNIT_RISK_PERCENT`: 1유닛 리스크 (1%)
- `MAX_UNITS_PER_MARKET`: 종목당 최대 유닛 (4유닛)
- `BREAKOUT_PERIOD`: 돌파 기준일 (20일)
- `PYRAMID_STEP`: 피라미딩 간격 (0.5N)
- `STOP_LOSS_DISTANCE`: 스톱로스 거리 (2N)
- `TRADING_MODE`: simulation/paper/real

## ⚠️ 주의사항

1. **실거래 전 충분한 백테스팅 필수**
2. **초기에는 소액으로 시스템 검증**
3. **시장 상황에 따른 파라미터 조정 필요**
4. **손실 관리 규칙 철저히 준수**

## 📊 성과 기록

### 터틀 원본 성과 (1983-1988)
- 초기 자본: 100만 달러 (터틀들 평균)
- 운용 기간: 5년
- 총 수익: 1억 7,500만 달러 (터틀들 전체)
- 평균 연 수익률: 80% 이상
- 승률: 약 40% (소수의 큰 수익이 전체 수익 견인)

### 터틀 성공 요인
- **규칙 준수**: 감정 배제, 시스템 신뢰
- **리스크 관리**: ATR 기반 포지션 사이징
- **추세 추종**: 큰 추세에서 최대 수익 추출
- **손절 철저**: 작은 손실로 큰 손실 방지

## 📚 참고 자료

- 터틀 트레이딩 (마이클 코벨)
- 리처드 데니스의 투자 철학
- 윌리엄 에크하르트의 리스크 관리

---

**면책조항**: 이 시스템은 교육 목적으로 제작되었습니다. 실제 투자에 따른 손실은 전적으로 사용자의 책임입니다.